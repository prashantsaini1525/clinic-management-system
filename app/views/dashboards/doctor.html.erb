<div class="doctor-dashboard-container">

  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <h1>ğŸ‘¨â€âš•ï¸ Doctor Dashboard</h1>
    <p class="welcome-text">Welcome Dr. <%= current_user&.email || "Guest" %>!</p>
  </div>

  <!-- ğŸ” Search + Filter Bar -->
  <div class="dashboard-filters">
    <input type="text" placeholder="Search patients..." class="dashboard-search">

    <div class="filter-buttons">
      <button class="filter-btn active">Today</button>
      <button class="filter-btn">This Week</button>
      <button class="filter-btn">This Month</button>
      <button class="filter-btn">All Time</button>
    </div>
  </div>

    <!-- Summary Cards (Now 4 boxes) -->
    <div class="summary-cards">
      <div class="summary-card">
        <h3>Total Patients</h3>
        <p><%= @total_patients %></p>
      </div>

      <div class="summary-card">
        <h3>Registered Today</h3>
        <p><%= @patients_today %></p>
      </div>

      <div class="summary-card">
        <h3>This Week</h3>
        <p><%= @patients_this_week || 0 %></p>
      </div>

      <div class="summary-card">
        <h3>Top Disease</h3>
        <p><%= @most_common_disease || "N/A" %></p>
      </div>
    </div>


  <!-- Line Chart -->
  <div class="dashboard-section">
    <h2>ğŸ“ˆ Patient Registrations Over Time</h2>
    <%= line_chart @patients_per_day, height: "300px", xtitle: "Date", ytitle: "Patients Registered" %>
  </div>

  <!-- Bar Chart -->
  <div class="dashboard-section">
    <h2>ğŸ“Š Patients by Disease</h2>
    <%= bar_chart @patients_by_disease, height: "300px", xtitle: "Disease", ytitle: "Count" %>
  </div>

  <!-- Recent Registrations List -->
  <div class="dashboard-section recent-patients">
    <h2>ğŸ“ Recent Registrations</h2>
    <ul>
      <% @recent_patients.each do |p| %>
        <li><strong><%= p.name %></strong> - <%= p.registered_on.strftime("%d %b %Y") %></li>
      <% end %>
    </ul>
  </div>

  <!-- Last 10 Patients Table -->
  <div class="dashboard-section">
    <h2>ğŸ“‹ Last 10 Registered Patients</h2>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Age</th>
          <th>Disease</th>
          <th>Address</th>
          <th>Registered On</th>
        </tr>
      </thead>
      <tbody>
        <% @last_10_patients.each do |p| %>
          <tr>
            <td><%= p.name %></td>
            <td><%= p.age %></td>
            <td><%= p.disease %></td>
            <td><%= p.address %></td>
            <td><%= p.registered_on.strftime("%d-%m-%Y") %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
